#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo 'ğŸ”§ğŸ’£ Lagi ngerakit, ngetes, sama ngebuild project sebelum commit...'

# Cek format pakai Prettier
pnpm check-format ||
(
  echo 'ğŸ’©ğŸš½ Formatting lo jorok kayak wc umum. ğŸ’©ğŸš½
      Prettier Check GAGAL. Jalanin "pnpm format", benerin dulu, baru commit sono.'
  false;
)

# Cek type check dari tsconfig
pnpm check-types ||
(
  echo 'ğŸ¤¡ğŸ§  Type checknya MAMPUS. ğŸ¤¡ğŸ§ 
      Lo yakin mau pamerin kode sampah kayak gitu? Benerin napa.'
  false;
)

# Build project
pnpm build ||
(
  echo 'ğŸ”¥ğŸ—‘ï¸ BUILD LO KEBARAKAN, BRO. ğŸ”¥ğŸ—‘ï¸
      Error segitu aja ga kelar-kelar. Fix dulu, baru nyusahin repo.'
  false;
)

# Kalau semua lolos
echo 'ğŸ†ğŸ˜ Sip, project lo lolos audit kali ini. Commit lanjut! ğŸ†ğŸ˜'
